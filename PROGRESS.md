# NEW-VOICE 2.0 ‚Äî –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–ü—Ä–æ–µ–∫—Ç:** –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö AI-–±–æ—Ç–æ–≤
- **–¶–µ–ª—å:** –ë–æ—Ç—ã –æ–±—â–∞—é—Ç—Å—è –∫–∞–∫ –ª—é–¥–∏, —Ä–∞–±–æ—Ç–∞—é—Ç —Å –≤—Ö–æ–¥—è—â–∏–º–∏/–∏—Å—Ö–æ–¥—è—â–∏–º–∏ –∑–≤–æ–Ω–∫–∞–º–∏
- **–ö–æ–º–ø–∞–Ω–∏—è:** AI Prosto
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** https://github.com/khak1m/new-voice
- **–°–µ—Ä–≤–µ—Ä:** 77.233.212.58 (Ubuntu 24.04, 2 vCPU, 4GB RAM)

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –°—Ç–∞—Ç—É—Å |
|-----------|------------|--------|
| **LLM** | Ollama (Llama/Qwen) | ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ |
| **STT** | Deepgram | –í—ã–±—Ä–∞–Ω–æ |
| **TTS** | Cartesia | –í—ã–±—Ä–∞–Ω–æ |
| **Real-time** | LiveKit | –í—ã–±—Ä–∞–Ω–æ |
| **Telephony** | MTS Exolve | –í—ã–±—Ä–∞–Ω–æ |
| **RAG** | Qdrant | –í—ã–±—Ä–∞–Ω–æ |
| **Database** | PostgreSQL / Supabase | –í—ã–±—Ä–∞–Ω–æ |

> **–ü–æ—á–µ–º—É Ollama –≤–º–µ—Å—Ç–æ Groq?** Groq –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏–∑ –†–§ (403 Forbidden). Ollama —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚Äî –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å.

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

### –≠—Ç–∞–ø 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- [x] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É (77.233.212.58)
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã Ubuntu 24.04
- [x] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3.12.3
- [x] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker 29.1.4
- [x] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git 2.43.0

### –≠—Ç–∞–ø 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [x] –°–æ–∑–¥–∞–Ω GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [x] –°–æ–∑–¥–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
- [x] –ó–∞–≥—Ä—É–∂–µ–Ω –ø—Ä–æ–µ–∫—Ç –≤ GitHub

### –≠—Ç–∞–ø 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [x] –°–ø–∏—Å–æ–∫ —Ñ–∏—á MVP
- [x] –ë—ç–∫–ª–æ–≥ –∑–∞–¥–∞—á
- [x] –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏–∏
- [x] –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 4: –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è Scenario Engine
- [x] –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [x] –î–∏–∑–∞–π–Ω
- [x] –ü–ª–∞–Ω –∑–∞–¥–∞—á

### –≠—Ç–∞–ø 5: –ö–æ–¥ Scenario Engine
- [x] 1.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ src/scenario_engine/
- [x] 1.2 –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (models.py) ‚Äî –≥–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [x] 2.1-2.3 ConfigLoader ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤
- [x] 4.1-4.2 StateMachine ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏
- [x] 5.1-5.3 ContextManager ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–≤–æ–Ω–∫–∞
- [x] 7.1-7.3 FieldExtractor ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–µ—á–∏
- [x] 8.1-8.2 LanguageDetector ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ ru/en
- [x] 9.1 OutcomeClassifier ‚Äî –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [x] 11.1-11.3 ScenarioEngine Core ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫
- [x] –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞ (examples/salon_bot_config.yaml)

---

## üîÑ –°–õ–ï–î–£–Æ–©–ê–Ø –ó–ê–î–ê–ß–ê

**–ó–∞–¥–∞—á–∞:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Voice Pipeline –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç: `python scripts/test_services.py`
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç–∞: `python -m src.voice_agent.agent`

---

## ‚è≥ –û–°–¢–ê–í–®–ò–ï–°–Ø –ó–ê–î–ê–ß–ò

### Scenario Engine (‚úÖ 95% –≥–æ—Ç–æ–≤–æ)
- [ ] 19. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Voice Pipeline (LiveKit –∞–¥–∞–ø—Ç–µ—Ä)

### Provider Layer (üîÑ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
- [x] Ollama LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä ‚Äî –∫–æ–¥ –≥–æ—Ç–æ–≤
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama –Ω–∞ —Å–µ—Ä–≤–µ—Ä ‚úÖ
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å LLM –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚úÖ
- [x] Deepgram STT –ø—Ä–æ–≤–∞–π–¥–µ—Ä ‚Äî –∫–æ–¥ –≥–æ—Ç–æ–≤
- [x] Cartesia TTS –ø—Ä–æ–≤–∞–π–¥–µ—Ä ‚Äî –∫–æ–¥ –≥–æ—Ç–æ–≤
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Voice Pipeline
- [ ] MTS Exolve —Ç–µ–ª–µ—Ñ–æ–Ω–∏—è

### –û—Å—Ç–∞–ª—å–Ω–æ–µ
- [ ] RAG System (Qdrant)
- [ ] Voice Pipeline (LiveKit)
- [ ] Admin API
- [ ] Admin UI

---

## üìä –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å

```
–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë 90%
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë 90%
Scenario Engine: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë 95%
Provider Layer:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 60%  (LLM, STT, TTS –≥–æ—Ç–æ–≤—ã)
Voice Pipeline:  ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 40%  (–∫–æ–¥ –≥–æ—Ç–æ–≤, –Ω—É–∂–µ–Ω —Ç–µ—Å—Ç)
RAG System:      ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 0%
Admin API:       ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 0%
Admin UI:        ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 0%
```

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–¥–∞

```
src/scenario_engine/
‚îú‚îÄ‚îÄ __init__.py           ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ models.py             ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ exceptions.py         ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config_loader.py      ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ YAML/JSON
‚îú‚îÄ‚îÄ state_machine.py      ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏
‚îú‚îÄ‚îÄ context_manager.py    ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–≤–æ–Ω–∫–∞
‚îú‚îÄ‚îÄ field_extractor.py    ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–µ—á–∏
‚îú‚îÄ‚îÄ language_detector.py  ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
‚îú‚îÄ‚îÄ outcome_classifier.py ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îî‚îÄ‚îÄ engine.py             ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫

src/providers/
‚îú‚îÄ‚îÄ __init__.py           ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ ollama_llm.py         ‚úÖ Ollama LLM (–ª–æ–∫–∞–ª—å–Ω—ã–π)
‚îî‚îÄ‚îÄ groq_llm.py           ‚úÖ Groq LLM (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –≤ –†–§)

src/voice_agent/
‚îú‚îÄ‚îÄ __init__.py           ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç
‚îî‚îÄ‚îÄ agent.py              ‚úÖ LiveKit Voice Agent

examples/
‚îî‚îÄ‚îÄ salon_bot_config.yaml ‚úÖ –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞

scripts/
‚îú‚îÄ‚îÄ test_ollama.py        ‚úÖ –¢–µ—Å—Ç Ollama
‚îú‚îÄ‚îÄ test_groq.py          ‚úÖ –¢–µ—Å—Ç Groq
‚îî‚îÄ‚îÄ test_services.py      ‚úÖ –¢–µ—Å—Ç –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```

---

## üîë –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **–ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî –∫–ª–∏–µ–Ω—Ç —Å–∞–º –∑–∞–¥–∞—ë—Ç —ç—Ç–∞–ø—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
2. **LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã** ‚Äî –Ω–µ —à–∞–±–ª–æ–Ω—ã, –∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ—á—å
3. **Ollama –¥–ª—è LLM** ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
4. **Groq –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω** ‚Äî 403 Forbidden –∏–∑ –†–§
5. **–¢–µ—Å—Ç—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ** ‚Äî –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ MVP

---

## üìÖ –ò—Å—Ç–æ—Ä–∏—è

| –î–∞—Ç–∞ | –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ |
|------|-------------|
| 2026-01-12 | –ù–∞—Å—Ç—Ä–æ–µ–Ω —Å–µ—Ä–≤–µ—Ä, —Å–æ–∑–¥–∞–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π |
| 2026-01-12 | –ù–∞–ø–∏—Å–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| 2026-01-12 | –ü–µ—Ä–µ–¥–µ–ª–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ –≥–∏–±–∫—É—é |
| 2026-01-12 | –°–æ–∑–¥–∞–Ω—ã models, config_loader, state_machine, context_manager |
| 2026-01-12 | –°–æ–∑–¥–∞–Ω—ã field_extractor, language_detector, outcome_classifier |
| 2026-01-12 | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –æ—Å–Ω–æ–≤–Ω–æ–π ScenarioEngine |
| 2026-01-12 | Groq –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∏–∑ –†–§ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Ollama |
| 2026-01-12 | –°–æ–∑–¥–∞–Ω Ollama LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä |
| 2026-01-12 | –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Ollama –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω ‚úÖ |
| 2026-01-12 | –°–æ–∑–¥–∞–Ω Voice Agent (LiveKit + Deepgram + Cartesia) |
